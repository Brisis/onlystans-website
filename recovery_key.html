<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>OnlyStans | Recovery Key</title>
    <meta name="description"
        content="OnlyStans Content Policy. Rules regarding prohibited content, adult material, and community guidelines." />
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="icon" href="assets/images/icon.png" type="image/svg+xml">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body { font-family: 'Inter', sans-serif; background-color: #ffffff; }
        .app-shell { max-width: 550px; margin: 0 auto; min-height: 100vh; padding: 24px; display: flex; flex-direction: column; justify-content: center; }
        .key-box { background-color: #F3F4F6; border: 1px solid #D1D5DB; border-radius: 12px; }
        .obscured { letter-spacing: 0.2em; font-size: 1.2rem; }
    </style>
</head>
<body class="font-sans antialiased text-gray-800 bg-gray-50">

    <div class="app-shell text-center bg-white p-8 md:p-12 space-y-8">
        <div class="flex justify-center mb-8">
            <img src="assets/images/logo.png" alt="OnlyStans Logo" class="w-[250px]">
        </div>

        <div class="flex justify-center mb-4">
            <i class="fas fa-exclamation-triangle text-amber-500 text-6xl"></i>
        </div>

        <p class="text-sm text-black/80 leading-relaxed px-2 mb-8">
            This is the <span class="font-bold">ONLY</span> way to reset your password if you forget it. Keep it safe and secure.
        </p>

        <div class="key-box p-4 flex items-center mb-8">
            <div id="recoveryKeyText" class="flex-1 text-left text-sm font-medium text-gray-800 break-all leading-tight pr-2 obscured">
                ••••••••••••••••••••••••••••••••••••••••
            </div>
            <button onclick="toggleKeyVisibility()" class="text-gray-400 p-2">
                <i id="visibilityIcon" class="fas fa-eye-slash"></i>
            </button>
        </div>

        <button onclick="copyToClipboard()" class="w-full h-[50px] border border-gray-300 rounded-lg flex items-center justify-center space-x-2 text-gray-700 font-semibold mb-4 hover:bg-gray-50 transition">
            <i class="far fa-copy"></i>
            <span>COPY KEY</span>
        </button>

        <button onclick="handleFinish()" class="w-full bg-blue-500 text-white font-bold py-4 rounded-xl shadow-lg hover:bg-blue-600 transition tracking-wide">
            I HAVE SAVED IT
        </button>

        <div id="toast" class="fixed bottom-10 left-1/2 -translate-x-1/2 bg-black/80 text-white px-6 py-3 rounded-full text-sm font-medium hidden">
            Recovery key copied to clipboard!
        </div>
    </div>

    <script>
        // Mocking the User Model and Auth State
        const loggedInUser = {
            recoveryKey: "STANS-9281-KLOQ-7712-A8S1-MJQ2-0012-P9L1-RECOVERY-MASTER-KEY"
        };

        let isKeyVisible = false;

        // Toggle Visibility Logic
        function toggleKeyVisibility() {
            const keyText = document.getElementById('recoveryKeyText');
            const icon = document.getElementById('visibilityIcon');
            isKeyVisible = !isKeyVisible;

            if (isKeyVisible) {
                keyText.innerText = loggedInUser.recoveryKey;
                keyText.classList.remove('obscured');
                icon.classList.replace('fa-eye-slash', 'fa-eye');
            } else {
                keyText.innerText = "••••••••••••••••••••••••••••••••••••••••";
                keyText.classList.add('obscured');
                icon.classList.replace('fa-eye', 'fa-eye-slash');
            }
        }

        // Copy to Clipboard Logic (Clipboard.setData)
        function copyToClipboard() {
            navigator.clipboard.writeText(loggedInUser.recoveryKey).then(() => {
                const toast = document.getElementById('toast');
                toast.classList.remove('hidden');
                setTimeout(() => toast.classList.add('hidden'), 2000);
            });
        }

        // Navigation Logic (navigateToHome logic)
        function handleFinish() {
            const navigateToHome = true; // Simulating the widget property
            if (navigateToHome) {
                // Navigator.pushNamedAndRemoveUntil(context, "/home", ...)
                window.location.href = "index.html";
            } else {
                // Navigator.pop(context)
                history.back();
            }
        }
    </script>
</body>
</html>